<!-- ## Agricultural Management  -->

The crop management file in the EPIC model contains essential information on various agricultural practices, including crop type and rotation schedules, planting and harvesting dates, irrigation methods and timing, and tillage details (such as type, depth, and frequency). This detailed setup enables the EPIC model to simulate the effects of management decisions on crop yield and environmental impact. Refer to the epic user manual to know about the structure of management files.

<img src="../assets/opc.jpg" alt="OPC" width="80%"/>

### 1. Generating Crop Management File

To generate an OPC file, you can use the following command where this package is installed:

```bash
geo_epic utility generate_opc -c /path/to/crop_data.csv -t /path/to/template_folder -o /path/to/output.OPC
```

 - **`-c`**: Path to the crop data CSV file. This file should contain crop information for each year with the following columns (comma-separated):


    ``` 
    epic_code,planting_date,harvest_date,year
    2,2006-05-08,2006-12-05,2006
    1,2007-03-18,2007-12-18,2007
    2,2008-03-31,2008-12-05,2008
    1,2009-04-09,2009-10-25,2009
    2,2010-05-23,2010-12-03,2010
    ```

 - **`-t`**: Path to the template folder. This folder should contain:
    - Template management files for each required crop, detailing routine practices specific to that crop.

        ```
            Corn
            3  0
            1  4 22   30    0    2    0   0.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  4 23   33    0    2    0   0.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  4 24   71    0    2   52 160.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  4 25    2    0    2    01700.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  9 25  650    0    2    0   0.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  9 26  740    0    2    0   0.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
            1  9 27   41    0    2    0   0.000    0.00    0.00   0.000    0.00    0.00    0.00    0.00
        ```

    - A MAPPING file that provides mapping from epic_code to template_name for each crop.

        ```
            epic_code,template_code
            2,CORN
            4,COTS
            18,RICE
            3,GRSG
            1,SOYB
        ```

    - In the EPIC model, the management file is generated by adjusting all dates of crop practices (such as fertilization, irrigation, and tillage) to be relative to the specified planting and harvest dates for each crop. This means that each practice date in the template management file should be set as a relative interval (e.g., a certain number of days before or after planting or harvest).

    **Note**: If you create a workspace, you can see a sample template folder under the opc directory.

 - **`-o`**: Path where the output crop management file will be stored.



